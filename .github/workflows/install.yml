name: Install npm dependencies and cache

on:
  workflow_call:
    inputs:
      path:
        description: Path to install directory
        default: src
        type: string
      cache-key:
        description: Cache key

jobs:
  install-deps:
    name: Install dependencies
    runs-on: ubuntu-latest
    steps:
      - id: try-cache
        uses: actions/cache@v2
        with:
          path: |
            ~/.npm
            **/node_modules
          key: ${{ inputs.cache-key }}
      - run: npm ci
        if: ${{ steps.try-cache.outputs.cache-hit }}
        working-directory: ${{ inputs.path }}